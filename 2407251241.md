# configuring SSH-based authentication on a Debian server
There are various methods for authenticating on an SSH server, with password authentication being the default. However, this default method is not the most secure approach. In terms of both convenience and security, SSH key-based authentication is a better option in both regards.[^1]

```
I will need to create/reference a node that better explains how SSH keys work here.
```

## creating SSH keys
First, an SSH key needs to be generated on the client device, if there isn't already a key, using `ssh-keygen`, which is included in the `openssh` package. By default, OpenSSH versions 9.5 and above will generate an ed25519 key pair.[^2]

```
$ ssh-keygen
Generating public/private [ALGORITHM] key pair.
Enter file in which to save the key (/home/username/.ssh/id_[ALGORITHM]): []
```

At this prompt, you can specify a nonstandard path for placing the keys. Otherwise, pressing `ENTER` will save the keys in the default location: `/home/username/.ssh/id_[ALGORITHM]`.

In `~/.ssh`, the private key will be called `id_[ALGORITHM]` and the associated public key will be called `id_[ALGORITHM].pub`. Under no circumstances should the private key be shared.


2. Copy the SSH key to the server using the `ssh-copy-id` command to transfer your SSH public key to the server, this command is included with the ssh package:
```
$ ssh-copy-id username@remote_host
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
username@remote_host's password: []

Number of key(s) added: 1

Now try logging into the machine, with: "ssh 'username@remote_host'"
and check to make sure that only the key(s) you wanted were added.
```

3. Modify the `/etc/ssh/sshd_config` file on the server to disable password authentication:
```
PasswordAuthentication no
```

4. Restart SSH Daemon in order to apply the changes:
```
$ sudo systemctl restart ssh
```

[^2]

[^1]: In hindsight, the phrase "in terms of both convenience and security... better in both regards" is rather ambiguous. The initial setup for SSH key-based authentication requires some effort, but subsequent logins are quicker since they don't require entering a password each time, which is what I meant by being more convenient. The security aspect is indeed better, as justified in [[2407251026]].
[^2]: Prior versions default to creating a 3072-bit RSA key pair as may be found in the [OpenSSH release notes](https://www.openssh.com/releasenotes.html).

[^2]: Additional explanations may be found in [this article](https://www.digitalocean.com/community/tutorials/how-to-configure-ssh-key-based-authentication-on-a-linux-server#step-4-disabling-password-authentication-on-your-server).
